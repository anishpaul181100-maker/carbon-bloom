{% extends 'base.html' %}



{% block content %}
    <style>
        body {
        box-sizing: border-box;
        }
        
        .input-field {
        transition: all 0.3s ease;
        }
        
        .input-field:focus {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .submit-btn {
        transition: all 0.3s ease;
        }
        
        .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
    </style>

     <div class="w-full mr-5 ml-5 items-center justify-center min-h-screen flex">
   <div class="rounded-2xl shadow-2xl overflow-hidden"><!-- Header Section -->
    <div class="px-8 py-10 text-center">
     <h1 id="page-title" class="mb-3" style="font-size: 2rem; font-weight: 700; line-height: 1.2;">Company Login</h1>
     <p id="subtitle" class="opacity-90" style="font-size: 1rem;">Enter your company details to continue</p>
    </div><!-- Form Section -->
    <div class="px-12 py-14">
     <form id="login-form"><!-- Company Name -->
      <div class="mb-6"><label for="company-name" class="block mb-2" style="font-size: 0.875rem; font-weight: 600;">Company Name</label> <input type="text" id="company-name" name="company-name" class="input-field w-full px-4 py-3 rounded-lg border-2 focus:outline-none" placeholder="Enter company name" required style="font-size: 1rem;">
      </div><!-- CIN Number -->
      <div class="mb-6"><label for="company-id" class="block mb-2" style="font-size: 0.875rem; font-weight: 600;">CIN Number</label> <input type="text" id="company-id" name="company-id" class="input-field w-full px-4 py-3 rounded-lg border-2 focus:outline-none" placeholder="Enter CIN Number" required style="font-size: 1rem;">
      </div><!-- Password -->
      <div class="mb-8"><label for="password" class="block mb-2" style="font-size: 0.875rem; font-weight: 600;">Password</label>
       <div class="relative"><input type="password" id="password" name="password" class="input-field w-full px-4 py-3 rounded-lg border-2 focus:outline-none pr-12" placeholder="Enter password" required style="font-size: 1rem;"> <button type="button" id="toggle-password" class="absolute right-3 top-1/2 transform -translate-y-1/2 focus:outline-none hover:opacity-70 transition-opacity" aria-label="Toggle password visibility">
         <svg id="eye-icon" width="24" height="24" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 5C7 5 2.73 8.11 1 12.5C2.73 16.89 7 20 12 20C17 20 21.27 16.89 23 12.5C21.27 8.11 17 5 12 5ZM12 17.5C9.24 17.5 7 15.26 7 12.5C7 9.74 9.24 7.5 12 7.5C14.76 7.5 17 9.74 17 12.5C17 15.26 14.76 17.5 12 17.5ZM12 9.5C10.34 9.5 9 10.84 9 12.5C9 14.16 10.34 15.5 12 15.5C13.66 15.5 15 14.16 15 12.5C15 10.84 13.66 9.5 12 9.5Z" fill="currentColor" />
         </svg>
         <svg id="eye-slash-icon" class="hidden" width="24" height="24" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 7.5C14.76 7.5 17 9.74 17 12.5C17 13.01 16.92 13.5 16.78 13.96L19.82 17C21.21 15.77 22.31 14.22 23 12.5C21.27 8.11 17 5 12 5C10.73 5 9.51 5.2 8.36 5.57L10.53 7.74C11 7.6 11.49 7.5 12 7.5ZM2.71 3.16C2.32 3.55 2.32 4.18 2.71 4.57L4.68 6.54C3.06 7.83 1.77 9.53 1 12.5C2.73 16.89 7 20 12 20C13.52 20 14.97 19.7 16.31 19.18L19.03 21.9C19.42 22.29 20.05 22.29 20.44 21.9C20.83 21.51 20.83 20.88 20.44 20.49L4.13 4.16C3.74 3.77 3.1 3.77 2.71 3.16ZM12 17.5C9.24 17.5 7 15.26 7 12.5C7 11.73 7.18 11 7.49 10.36L8.94 11.81C8.82 12.03 8.75 12.26 8.75 12.5C8.75 13.74 9.76 14.75 11 14.75C11.24 14.75 11.47 14.68 11.69 14.56L13.14 16.01C12.79 16.3 12.4 16.54 12 16.7C11.5 16.9 10.99 17 10.5 17C9.24 17 8 15.76 8 14.5C8 14.01 8.1 13.5 8.3 13.05L9.23 13.98C9.08 14.29 9 14.64 9 15C9 16.1 9.9 17 11 17C11.36 17 11.71 16.92 12.02 16.77L13.46 18.21C12.99 18.41 12.5 18.5 12 18.5Z" fill="currentColor" />
         </svg></button>
       </div>
      </div><!-- Submit Button --> <button type="submit" id="submit-btn" class="submit-btn w-full py-4 rounded-lg font-semibold shadow-lg" style="font-size: 1rem;"> Sign In </button>
     </form><!-- Success Message (Hidden by default) -->
     <div class="mt-3 items-center justify-center">
        Don't have an account?
        <div class="mt-2">
            <a href="{% url 'reg_frm' %}" class="text-green-600 hover:underline">Register as Farmer</a>
            <span class="mx-2">|</span>
            <a href="{% url 'reg_comp' %}" class="text-green-600 hover:underline">Register as Company</a>
            <span class="mx-2">|</span>
            <a href="{% url 'vol_apply' %}" class="text-green-600 hover:underline">Apply as Volunteer</a>
        </div>
     </div>
     <div id="success-message" class="hidden mt-6 p-4 rounded-lg text-center" style="font-size: 0.875rem;">
      ? Login successful! Welcome back.
     </div>
    </div>
   </div>
  </div>
    <script>
    const defaultConfig = {
      background_color: "#1e40af",
      surface_color: "#ffffff",
      text_color: "#1f2937",
      primary_action_color: "#3b82f6",
      secondary_action_color: "#10b981",
      font_family: "Inter, system-ui, sans-serif",
      font_size: 16,
      page_title: "Company Login",
      subtitle: "Enter your company details to continue",
      submit_button: "Sign In"
    };

    let config = {};

    async function onConfigChange(newConfig) {
      config = newConfig;
      
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      const fontFamily = config.font_family || defaultConfig.font_family;
      const baseFontSize = config.font_size || defaultConfig.font_size;
      
      // Apply background color to body
      document.body.style.backgroundColor = backgroundColor;
      
      // Apply colors to header section
      const headerSection = document.querySelector('.rounded-2xl > div:first-child');
      headerSection.style.backgroundColor = backgroundColor;
      headerSection.style.color = surfaceColor;
      
      // Apply colors to form section
      const formSection = document.querySelector('.rounded-2xl > div:last-child');
      formSection.style.backgroundColor = surfaceColor;
      
      // Apply text colors
      document.getElementById('page-title').style.color = surfaceColor;
      document.getElementById('subtitle').style.color = surfaceColor;
      
      const labels = document.querySelectorAll('label');
      labels.forEach(label => {
        label.style.color = textColor;
      });
      
      // Apply input field styles
      const inputs = document.querySelectorAll('.input-field');
      inputs.forEach(input => {
        input.style.borderColor = textColor + '33';
        input.style.color = textColor;
        input.style.backgroundColor = surfaceColor;
      });
      
      // Apply button colors
      const submitBtn = document.getElementById('submit-btn');
      submitBtn.style.backgroundColor = primaryActionColor;
      submitBtn.style.color = surfaceColor;
      
      // Apply success message colors
      const successMsg = document.getElementById('success-message');
      successMsg.style.backgroundColor = secondaryActionColor + '20';
      successMsg.style.color = secondaryActionColor;
      
      // Apply font family
      const baseFontStack = 'system-ui, sans-serif';
      document.body.style.fontFamily = `${fontFamily}, ${baseFontStack}`;
      
      // Apply font sizes
      document.getElementById('page-title').style.fontSize = `${baseFontSize * 2}px`;
      document.getElementById('subtitle').style.fontSize = `${baseFontSize}px`;
      document.getElementById('submit-btn').style.fontSize = `${baseFontSize}px`;
      
      inputs.forEach(input => {
        input.style.fontSize = `${baseFontSize}px`;
      });
      
      labels.forEach(label => {
        label.style.fontSize = `${baseFontSize * 0.875}px`;
      });
      
      // Apply editable text content
      document.getElementById('page-title').textContent = config.page_title || defaultConfig.page_title;
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.getElementById('submit-btn').textContent = config.submit_button || defaultConfig.submit_button;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ surface_color: value });
              }
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () => config.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              config.primary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            }
          },
          {
            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              config.secondary_action_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["page_title", config.page_title || defaultConfig.page_title],
        ["subtitle", config.subtitle || defaultConfig.subtitle],
        ["submit_button", config.submit_button || defaultConfig.submit_button]
      ]);
    }

    // Initialize the Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
      
      config = window.elementSdk.config;
      onConfigChange(config);
    }

    // Password toggle handler
    document.getElementById('toggle-password').addEventListener('click', function() {
      const passwordInput = document.getElementById('password');
      const eyeIcon = document.getElementById('eye-icon');
      const eyeSlashIcon = document.getElementById('eye-slash-icon');
      
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.classList.add('hidden');
        eyeSlashIcon.classList.remove('hidden');
      } else {
        passwordInput.type = 'password';
        eyeIcon.classList.remove('hidden');
        eyeSlashIcon.classList.add('hidden');
      }
    });

    // Form submission handler
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = {
        companyName: document.getElementById('company-name').value,
        companyId: document.getElementById('company-id').value,
        password: document.getElementById('password').value
      };
      
      // Show success message
      const successMessage = document.getElementById('success-message');
      successMessage.classList.remove('hidden');
      
      // Hide form
      document.getElementById('login-form').style.display = 'none';
      
      // Reset after 3 seconds
      setTimeout(() => {
        successMessage.classList.add('hidden');
        document.getElementById('login-form').style.display = 'block';
        document.getElementById('login-form').reset();
      }, 3000);
    });
  </script>
 
{% endblock content %}
    