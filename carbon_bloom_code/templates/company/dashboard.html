{% extends 'base.html' %}


{% block content %}
    
    <div class="dashboard-container max-w-7xl mx-auto"><!-- Header -->
      <div class="mb-8 slide-in">
        <h1 id="dashboard-title"
          class="text-4xl font-bold text-emerald-900 mb-2">Sustainability
          Dashboard</h1>
        <p class="text-emerald-700">Real-time environmental impact monitoring
          and reporting</p>
      </div><!-- Company Overview Section -->
      <div
        class="bg-white rounded-2xl shadow-lg p-6 mb-6 slide-in border-l-4 border-emerald-500">
        <h2
          class="text-2xl font-bold text-emerald-900 mb-4 flex items-center"><span
            class="text-3xl mr-3">??</span> Company Overview</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="bg-emerald-50 rounded-lg p-4">
            <p class="text-sm text-emerald-700 font-semibold mb-1">Company
              Name</p>
            <p id="company-name"
              class="text-lg text-emerald-900 font-bold">GreenTech
              Industries</p>
          </div>
          <div class="bg-emerald-50 rounded-lg p-4">
            <p class="text-sm text-emerald-700 font-semibold mb-1">Industry
              &amp; Sector</p>
            <p id="industry-sector"
              class="text-lg text-emerald-900 font-bold">Technology / Clean
              Energy</p>
          </div>
          <div class="bg-emerald-50 rounded-lg p-4">
            <p class="text-sm text-emerald-700 font-semibold mb-1">Locations</p>
            <p id="locations" class="text-lg text-emerald-900 font-bold">15
              Offices Globally</p>
          </div>
          <div class="bg-emerald-50 rounded-lg p-4">
            <p
              class="text-sm text-emerald-700 font-semibold mb-1">Sustainability
              Rating</p>
            <p id="sustainability"
              class="text-lg text-emerald-900 font-bold">???? A+ Grade</p>
          </div>
        </div>
      </div><!-- Carbon Emission Summary -->
      <div
        class="bg-white rounded-2xl shadow-lg p-6 mb-6 slide-in border-l-4 border-teal-500">
        <h2
          class="text-2xl font-bold text-teal-900 mb-4 flex items-center"><span
            class="text-3xl mr-3">??</span> Carbon Emission Summary</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div
            class="bg-gradient-to-br from-teal-100 to-teal-50 rounded-xl p-6 text-center">
            <p class="text-sm text-teal-700 font-semibold mb-2">Total Carbon
              Footprint (2024)</p>
            <p class="text-5xl font-bold text-teal-900 mb-1">45,230</p>
            <p class="text-lg text-teal-700">tonnes CO2e</p>
          </div>
          <div
            class="bg-gradient-to-br from-green-100 to-green-50 rounded-xl p-6 text-center">
            <p class="text-sm text-green-700 font-semibold mb-2">Change from
              2023</p>
            <p class="text-5xl font-bold text-green-600 mb-1">? 12.5%</p>
            <p class="text-lg text-green-700">5,650 tonnes reduced</p>
          </div>
        </div>
      </div><!-- Real-time Emission Tracker -->
      <div
        class="bg-white rounded-2xl shadow-lg p-6 mb-6 slide-in border-l-4 border-cyan-500">
        <h2
          class="text-2xl font-bold text-cyan-900 mb-4 flex items-center"><span
            class="text-3xl mr-3">?</span> Real-time Emission Tracker</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
          <div class="bg-cyan-50 rounded-lg p-4 text-center">
            <p class="text-sm text-cyan-700 font-semibold mb-2">Today</p>
            <p class="text-3xl font-bold text-cyan-900">124.5</p>
            <p class="text-sm text-cyan-700">tonnes CO2</p>
          </div>
          <div class="bg-cyan-50 rounded-lg p-4 text-center">
            <p class="text-sm text-cyan-700 font-semibold mb-2">This Week</p>
            <p class="text-3xl font-bold text-cyan-900">871.2</p>
            <p class="text-sm text-cyan-700">tonnes CO2</p>
          </div>
          <div class="bg-cyan-50 rounded-lg p-4 text-center">
            <p class="text-sm text-cyan-700 font-semibold mb-2">This Month</p>
            <p class="text-3xl font-bold text-cyan-900">3,542</p>
            <p class="text-sm text-cyan-700">tonnes CO2</p>
          </div>
        </div>
        <div class="bg-gray-50 rounded-lg p-4 mb-4">
          <p class="text-sm text-gray-700 font-semibold mb-2">Carbon Intensity
            per Unit Output</p>
          <p class="text-2xl font-bold text-gray-900">2.4 kg CO2 / product</p>
        </div>
        <div class="bg-amber-50 rounded-lg p-4 mb-4">
          <div class="flex justify-between items-center mb-2">
            <p class="text-sm text-amber-900 font-semibold">Emission Limit vs
              Current</p>
            <p class="text-sm font-bold text-amber-900">82% of limit</p>
          </div>
          <div class="w-full bg-amber-200 rounded-full h-6 overflow-hidden">
            <div
              class="progress-bar-fill bg-gradient-to-r from-amber-500 to-orange-500 h-full rounded-full"
              style="width: 82%"></div>
          </div>
          <p class="text-xs text-amber-700 mt-2">Current: 41,000 tonnes | Limit:
            50,000 tonnes</p>
        </div>
        <div class="bg-red-50 border-l-4 border-red-500 rounded-lg p-4">
          <p class="text-sm font-bold text-red-900 mb-1 pulse-animation">??
            Threshold Alert</p>
          <p class="text-sm text-red-700">Factory Unit 3 exceeded daily emission
            threshold by 15% at 14:30 UTC</p>
        </div>
      </div><!-- Projects & Interventions -->
      <div
        class="bg-white rounded-2xl shadow-lg p-6 mb-6 slide-in border-l-4 border-blue-500">
        <h2
          class="text-2xl font-bold text-blue-900 mb-4 flex items-center"><span
            class="text-3xl mr-3">??</span> Projects &amp; Interventions</h2>
        <div class="space-y-4">
          <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-green-500">
            <div class="flex justify-between items-start mb-2">
              <div>
                <p class="font-bold text-blue-900 text-lg">Solar Panel
                  Installation - Phase 3</p>
                <p class="text-sm text-blue-700">Renewable energy transition
                  across manufacturing sites</p>
              </div><span
                class="bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full">HIGH</span>
            </div>
            <div class="mt-3">
              <p class="text-sm text-blue-900 font-semibold">Emission Reduction
                Achieved</p>
              <p class="text-2xl font-bold text-green-600">-8,450 tonnes CO2</p>
            </div>
          </div>
          <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-yellow-500">
            <div class="flex justify-between items-start mb-2">
              <div>
                <p class="font-bold text-blue-900 text-lg">Fleet Electrification
                  Program</p>
                <p class="text-sm text-blue-700">Converting delivery vehicles to
                  electric</p>
              </div><span
                class="bg-yellow-500 text-white text-xs font-bold px-3 py-1 rounded-full">MEDIUM</span>
            </div>
            <div class="mt-3">
              <p class="text-sm text-blue-900 font-semibold">Emission Reduction
                Achieved</p>
              <p class="text-2xl font-bold text-green-600">-3,200 tonnes CO2</p>
            </div>
          </div>
          <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-gray-400">
            <div class="flex justify-between items-start mb-2">
              <div>
                <p class="font-bold text-blue-900 text-lg">Energy Efficiency
                  Upgrades</p>
                <p class="text-sm text-blue-700">LED lighting and HVAC
                  optimization</p>
              </div><span
                class="bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full">LOW</span>
            </div>
            <div class="mt-3">
              <p class="text-sm text-blue-900 font-semibold">Emission Reduction
                Achieved</p>
              <p class="text-2xl font-bold text-green-600">-1,100 tonnes CO2</p>
            </div>
          </div>
        </div>
      </div><!-- Offsets and Carbon Credits -->
      <div
        class="bg-white rounded-2xl shadow-lg p-6 mb-6 slide-in border-l-4 border-purple-500">
        <h2
          class="text-2xl font-bold text-purple-900 mb-4 flex items-center"><span
            class="text-3xl mr-3">??</span> Offsets &amp; Carbon Credits</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div class="bg-purple-50 rounded-lg p-4">
            <p class="text-sm text-purple-700 font-semibold mb-1">Carbon Credits
              Purchased</p>
            <p class="text-3xl font-bold text-purple-900">15,000</p>
            <p class="text-sm text-purple-700">tonnes CO2e</p>
          </div>
          <div class="bg-purple-50 rounded-lg p-4">
            <p class="text-sm text-purple-700 font-semibold mb-1">Credits
              Remaining</p>
            <p class="text-3xl font-bold text-purple-900">4,230</p>
            <p class="text-sm text-purple-700">tonnes CO2e</p>
          </div>
          <div class="bg-purple-50 rounded-lg p-4">
            <p class="text-sm text-purple-700 font-semibold mb-1">Total CO2
              Offset (2024)</p>
            <p class="text-3xl font-bold text-purple-900">10,770</p>
            <p class="text-sm text-purple-700">tonnes CO2e</p>
          </div>
          <div class="bg-purple-50 rounded-lg p-4">
            <p class="text-sm text-purple-700 font-semibold mb-1">Offset
              Progress</p>
            <div class="w-full bg-purple-200 rounded-full h-4 mt-2">
              <div class="bg-purple-600 h-full rounded-full"
                style="width: 72%"></div>
            </div>
            <p class="text-xs text-purple-700 mt-1">72% of emissions offset</p>
          </div>
        </div>
        <div class="bg-green-50 rounded-lg p-4">
          <p class="text-sm font-bold text-green-900 mb-3">? Verified Offset
            Projects</p>
          <ul class="space-y-2">
            <li class="flex items-start"><span
                class="text-green-600 mr-2">??</span> <span
                class="text-sm text-green-900"><strong>Amazon Rainforest
                  Conservation</strong> - 4,500 tonnes</span></li>
            <li class="flex items-start"><span
                class="text-green-600 mr-2">??</span> <span
                class="text-sm text-green-900"><strong>Wind Farm Development
                  (India)</strong> - 3,800 tonnes</span></li>
            <li class="flex items-start"><span
                class="text-green-600 mr-2">??</span> <span
                class="text-sm text-green-900"><strong>Ocean Plastic Removal
                  Initiative</strong> - 2,470 tonnes</span></li>
          </ul>
        </div>
      </div><!-- ESG Targets and Progress -->
      <div
        class="bg-white rounded-2xl shadow-lg p-6 mb-6 slide-in border-l-4 border-indigo-500">
        <h2
          class="text-2xl font-bold text-indigo-900 mb-4 flex items-center"><span
            class="text-3xl mr-3">??</span> ESG Targets &amp; Progress</h2>
        <div class="bg-indigo-50 rounded-lg p-4 mb-6">
          <p class="text-sm font-bold text-indigo-900 mb-4">Yearly Net Zero
            Roadmap</p>
          <div class="relative">
            <div class="flex justify-between mb-2">
              <div class="text-center">
                <div
                  class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold mb-1 mx-auto">
                  ?
                </div>
                <p class="text-xs font-semibold text-indigo-900">2024</p>
                <p class="text-xs text-indigo-700">-20%</p>
              </div>
              <div class="text-center">
                <div
                  class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold mb-1 mx-auto pulse-animation">
                  ï¿½
                </div>
                <p class="text-xs font-semibold text-indigo-900">2027</p>
                <p class="text-xs text-indigo-700">-50%</p>
              </div>
              <div class="text-center">
                <div
                  class="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold mb-1 mx-auto">
                  ?
                </div>
                <p class="text-xs font-semibold text-indigo-900">2035</p>
                <p class="text-xs text-indigo-700">-80%</p>
              </div>
              <div class="text-center">
                <div
                  class="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center text-gray-600 font-bold mb-1 mx-auto">
                  ?
                </div>
                <p class="text-xs font-semibold text-indigo-900">2050</p>
                <p class="text-xs text-indigo-700">Net Zero</p>
              </div>
            </div>
            <div class="absolute top-6 left-0 right-0 h-1 bg-gray-300"
              style="z-index: -1;">
              <div class="h-full bg-indigo-600 rounded-full"
                style="width: 25%"></div>
            </div>
          </div>
        </div>
        <div class="bg-indigo-50 rounded-lg p-4 mb-4">
          <p class="text-sm font-bold text-indigo-900 mb-2">Current Progress
            (2024)</p>
          <div class="space-y-3">
            <div>
              <div class="flex justify-between mb-1">
                <p class="text-sm text-indigo-900">Emission Reduction</p>
                <p class="text-sm font-bold text-indigo-900">20% / 20%</p>
              </div>
              <div class="w-full bg-indigo-200 rounded-full h-3">
                <div class="bg-green-500 h-full rounded-full"
                  style="width: 100%"></div>
              </div>
            </div>
            <div>
              <div class="flex justify-between mb-1">
                <p class="text-sm text-indigo-900">Renewable Energy Adoption</p>
                <p class="text-sm font-bold text-indigo-900">65% / 70%</p>
              </div>
              <div class="w-full bg-indigo-200 rounded-full h-3">
                <div class="bg-yellow-500 h-full rounded-full"
                  style="width: 93%"></div>
              </div>
            </div>
            <div>
              <div class="flex justify-between mb-1">
                <p class="text-sm text-indigo-900">Supply Chain
                  Sustainability</p>
                <p class="text-sm font-bold text-indigo-900">42% / 50%</p>
              </div>
              <div class="w-full bg-indigo-200 rounded-full h-3">
                <div class="bg-orange-500 h-full rounded-full"
                  style="width: 84%"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="bg-green-50 border-l-4 border-green-500 rounded-lg p-4">
            <p class="text-sm font-bold text-green-900 mb-1">? Compliance
              Status</p>
            <p class="text-sm text-green-700">All regulatory requirements
              met</p>
            <p class="text-xs text-green-600 mt-1">ISO 14001, GHG Protocol, SBTi
              validated</p>
          </div>
          <div class="bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4">
            <p class="text-sm font-bold text-orange-900 mb-1">?? Risk &amp;
              Mitigation</p>
            <p class="text-sm text-orange-700">Supply chain disruption risk:
              Medium</p>
            <p class="text-xs text-orange-600 mt-1">Mitigation: Diversifying
              suppliers by Q2 2025</p>
          </div>
        </div>
      </div><!-- Footer -->
      <div class="text-center text-emerald-700 text-sm mt-8">
        <p>Last updated: <span id="last-updated"></span></p>
        <p class="mt-2">Data refreshes every 15 minutes | Powered by
          Environmental Intelligence Platform</p>
      </div>
    </div>
    <script>
    const defaultConfig = {
      dashboard_title: "Sustainability Dashboard",
      company_name: "GreenTech Industries",
      industry: "Technology",
      sector: "Clean Energy",
      locations: "15 Offices Globally",
      sustainability_info: "???? A+ Grade",
      background_color: "#ecfdf5",
      surface_color: "#ffffff",
      text_color: "#064e3b",
      primary_action_color: "#059669",
      secondary_action_color: "#0d9488",
      font_family: "system-ui",
      font_size: 16
    };

    async function onConfigChange(config) {
      const titleElement = document.getElementById('dashboard-title');
      const companyNameElement = document.getElementById('company-name');
      const industrySectorElement = document.getElementById('industry-sector');
      const locationsElement = document.getElementById('locations');
      const sustainabilityElement = document.getElementById('sustainability');

      titleElement.textContent = config.dashboard_title || defaultConfig.dashboard_title;
      companyNameElement.textContent = config.company_name || defaultConfig.company_name;
      industrySectorElement.textContent = ${config.industry || defaultConfig.industry} / ${config.sector || defaultConfig.sector};
      locationsElement.textContent = config.locations || defaultConfig.locations;
      sustainabilityElement.textContent = config.sustainability_info || defaultConfig.sustainability_info;

      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.background = linear-gradient(to bottom right, ${backgroundColor}, ${surfaceColor});
      
      const surfaceElements = document.querySelectorAll('.bg-white');
      surfaceElements.forEach(el => el.style.backgroundColor = surfaceColor);

      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      document.body.style.fontFamily = ${customFont}, ${baseFontStack};

      const baseSize = config.font_size || defaultConfig.font_size;
      document.querySelector('h1').style.fontSize = ${baseSize * 2.25}px;
      document.querySelectorAll('h2').forEach(el => el.style.fontSize = ${baseSize * 1.5}px);
      document.body.style.fontSize = ${baseSize}px;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["dashboard_title", config.dashboard_title || defaultConfig.dashboard_title],
          ["company_name", config.company_name || defaultConfig.company_name],
          ["industry", config.industry || defaultConfig.industry],
          ["sector", config.sector || defaultConfig.sector],
          ["locations", config.locations || defaultConfig.locations],
          ["sustainability_info", config.sustainability_info || defaultConfig.sustainability_info]
        ])
      });
    }

    // Update timestamp
    function updateTimestamp() {
      const now = new Date();
      document.getElementById('last-updated').textContent = now.toLocaleString('en-US', {
        month: 'short',
        day: 'numeric',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        timeZoneName: 'short'
      });
    }

    updateTimestamp();
    setInterval(updateTimestamp, 60000);
  </script>
    <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a6ac523f0c03e1b',t:'MTc2NDUxMDE2OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
{% endblock content %}
